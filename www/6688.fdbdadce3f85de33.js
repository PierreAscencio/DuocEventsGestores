"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(x,m,u)=>{u.r(m),u.d(m,{LoginPageModule:()=>I});var h=u(177),i=u(4341),s=u(9465),d=u(8986),c=u(467),e=u(3953),f=u(4796);function p(n,r){1&n&&(e.j41(0,"div",13),e.EFF(1," *Correo Obligatorio "),e.k0s())}function v(n,r){1&n&&(e.j41(0,"div",13),e.EFF(1," *Correo debe tener minimo 8 caracteres "),e.k0s())}function b(n,r){if(1&n&&(e.j41(0,"div",13),e.DNE(1,p,2,0,"div",8)(2,v,2,0,"div",8),e.k0s()),2&n){let l,t;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(l=o.loginForm.get("email"))?null:l.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(t=o.loginForm.get("email"))?null:t.hasError("minlength"))}}function F(n,r){1&n&&(e.j41(0,"div",13),e.EFF(1," *Contrase\xf1a Obligatorio "),e.k0s())}function _(n,r){1&n&&(e.j41(0,"div",13),e.EFF(1," *Contrase\xf1a debe tener minimo 8 caracteres "),e.k0s())}function P(n,r){if(1&n&&(e.j41(0,"div",13),e.DNE(1,F,2,0,"div",8)(2,_,2,0,"div",8),e.k0s()),2&n){let l,t;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(l=o.loginForm.get("password"))?null:l.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(t=o.loginForm.get("password"))?null:t.hasError("minlength"))}}const k=[{path:"",component:(()=>{var n;class r{constructor(t,o,a,g,L,y,E){this.authservice=t,this.router=o,this.toast=a,this.alertcontroller=g,this.builder=L,this.formsmodule=y,this.reactiveformsmodule=E,this.alumno={rut:"",nombre:"",email:"",password:"",imagen:"",isactive:!1,id:""},this.loginForm=this.builder.group({email:new i.MJ("",[i.k0.required,i.k0.minLength(8)]),password:new i.MJ("",[i.k0.required,i.k0.minLength(8)])})}ngOnInit(){}mensajeInicioS(){var t=this;return(0,c.A)(function*(){yield(yield t.alertcontroller.create({header:"Sesion iniciada correctamente",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Alerta canceleda")}},{text:"OK",role:"confirm",handler:()=>{console.log("Alerta confirmada"),t.router.navigate(["/inicio"])}}]})).present()})()}login(){if(!this.loginForm.valid)return;const o=this.loginForm.value.password;this.authservice.GetUserByAlmuno(this.loginForm.value.email).subscribe(a=>(this.userdata=a,console.log(this.userdata),0===this.userdata.length?(this.loginForm.reset(),void this.alumnoNoExiste()):(this.alumno={rut:this.userdata[0].rut,nombre:this.userdata[0].nombre,password:this.userdata[0].password,email:this.userdata[0].email,isactive:this.userdata[0].isactive,imagen:this.userdata[0].imagen,id:this.userdata[0].id},this.alumno.password!==o?(this.loginForm.reset(),void this.Erroralumno()):this.alumno.isactive?void this.IniciarSesion(this.alumno):(this.loginForm.reset(),void this.alumnoInactivo()))))}IniciarSesion(t){this.loginForm.reset(),sessionStorage.setItem("nombre",t.nombre),sessionStorage.setItem("email",t.email),sessionStorage.setItem("password",t.password),sessionStorage.setItem("rut",t.rut),sessionStorage.setItem("id",t.id),sessionStorage.setItem("imagen",t.imagen),sessionStorage.setItem("ingresado","true"),this.showToast("Sesi\xf3n Iniciada "+this.alumno.nombre),this.router.navigate(["/iniestudiante"])}showToast(t){var o=this;return(0,c.A)(function*(){(yield o.toast.create({message:t,duration:3e3})).present()})()}alumnoInactivo(){var t=this;return(0,c.A)(function*(){(yield t.alertcontroller.create({header:"alumno inactivo",message:"Contactar a admin@admin.cl",buttons:["OK"]})).present()})()}Erroralumno(){var t=this;return(0,c.A)(function*(){(yield t.alertcontroller.create({header:"Error..",message:"Revise sus credenciales",buttons:["OK"]})).present()})()}alumnoNoExiste(){var t=this;return(0,c.A)(function*(){(yield t.alertcontroller.create({header:"No existe...",message:"Debe registrarse..",buttons:["OK"]})).present()})()}CrearUsuario(){this.router.navigate(["/crearusuario"])}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(f.u),e.rXU(d.Ix),e.rXU(s.K_),e.rXU(s.hG),e.rXU(i.ok),e.rXU(i.YN),e.rXU(i.X1))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],decls:23,vars:6,consts:[[3,"translucent"],["id","titulo",1,"titulo"],[3,"fullscreen"],[3,"formGroup"],[1,"login-container"],[1,"login-box"],[1,"titulo"],["placeholder","Ingrese Correo","labelPlacement","stacked","formControlName","email"],["id","alerta",4,"ngIf"],["type","password","placeholder","Ingrese Contrase\xf1a","labelPlacement","stacked","formControlName","password"],[2,"text-align","center","margin-top","30px"],["shape","round",1,"boton",3,"click","disabled"],["shape","round",1,"boton",3,"click"],["id","alerta"]],template:function(t,o){if(1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.EFF(3,"Login EventDuoc"),e.k0s()()(),e.j41(4,"ion-content",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"h1",6),e.EFF(9,"Bienvenido a EventDuoc"),e.k0s(),e.j41(10,"ion-list")(11,"ion-item"),e.nrm(12,"ion-input",7),e.k0s(),e.DNE(13,b,3,2,"div",8),e.j41(14,"ion-item"),e.nrm(15,"ion-input",9),e.k0s(),e.DNE(16,P,3,2,"div",8),e.j41(17,"div",10)(18,"ion-button",11),e.bIt("click",function(){return o.login()}),e.EFF(19," Login "),e.k0s()()(),e.j41(20,"div",10)(21,"ion-button",12),e.bIt("click",function(){return o.CrearUsuario()}),e.EFF(22," Crear Usuario "),e.k0s()()()()()()),2&t){let a,g;e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("formGroup",o.loginForm),e.R7$(8),e.Y8G("ngIf",(null==(a=o.loginForm.get("email"))?null:a.invalid)&&((null==(a=o.loginForm.get("email"))?null:a.dirty)||(null==(a=o.loginForm.get("email"))?null:a.touched))),e.R7$(3),e.Y8G("ngIf",(null==(g=o.loginForm.get("password"))?null:g.invalid)&&((null==(g=o.loginForm.get("password"))?null:g.dirty)||(null==(g=o.loginForm.get("password"))?null:g.touched))),e.R7$(2),e.Y8G("disabled",!o.loginForm.valid)}},dependencies:[h.bT,i.qT,i.BC,i.cb,s.Jm,s.W9,s.eU,s.$w,s.uz,s.nf,s.BC,s.ai,s.Gw,i.j4,i.JD],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: black}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.login-box[_ngcontent-%COMP%]{text-align:center;color:#0004ff;margin:20px;border-radius:10px;background:#333;padding:20px;width:100%;max-width:400px}.boton[_ngcontent-%COMP%]{--background: #00ffd5;--background-hover: #9ce0be;--background-activated: #dee4ab;--background-focused: #c8de05;--color: rgb(0, 0, 0);--border-radius: 15px;--border-color: #000;--border-style: solid;margin-top:10px}#botongod[_ngcontent-%COMP%]{margin-top:25px}#titulo[_ngcontent-%COMP%]{text-align:center;color:#0004ff}.titulo[_ngcontent-%COMP%]{text-align:center;font-family:titulo,sans-serif;--color: #0004ff}.texto[_ngcontent-%COMP%]{font-family:texto,serif}']}),r})()}];let C=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(k),d.iI]}),r})(),I=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.MD,i.YN,s.bv,C,i.X1]}),r})()}}]);